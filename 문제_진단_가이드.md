# 문제 진단 가이드

## 🔍 현재 문제: "불러오는 중" 상태에서 멈춤

이 문제는 보통 다음 중 하나의 원인입니다:

### 1. Netlify Functions가 배포되지 않음

**확인 방법:**
1. Netlify 대시보드 → 사이트 선택
2. Functions 탭 클릭
3. `imf-api` 함수가 있는지 확인

**해결 방법:**
- Functions가 없다면:
  1. GitHub 저장소에 `netlify/functions/imf-api.js` 파일이 있는지 확인
  2. Netlify에서 "Trigger deploy" 클릭하여 재배포
  3. 배포 로그에서 Functions 빌드 확인

### 2. Functions 경로 문제

**확인 방법:**
브라우저 콘솔(F12)에서 다음 확인:
- `Function URL: /.netlify/functions/imf-api?...` 메시지 확인
- 네트워크 탭에서 404 오류 확인

**해결 방법:**
- `netlify.toml`에 `functions = "netlify/functions"` 설정 확인
- Functions 디렉토리 구조 확인:
  ```
  netlify/
    functions/
      imf-api.js
  ```

### 3. 타임아웃 발생

**확인 방법:**
브라우저 콘솔에서 "요청 시간이 초과되었습니다" 메시지 확인

**해결 방법:**
- IMF API가 느리게 응답할 수 있음
- 타임아웃 시간이 30초로 설정되어 있음
- 더 긴 시간이 필요하면 코드에서 타임아웃 시간 증가

### 4. IMF API 자체 문제

**확인 방법:**
Netlify Functions 로그 확인:
1. Netlify 대시보드 → Functions 탭
2. `imf-api` 함수 클릭
3. "Logs" 탭에서 오류 확인

**해결 방법:**
- IMF API URL이 올바른지 확인
- IMF API가 일시적으로 다운되었을 수 있음

## 🛠️ 즉시 확인할 사항

### 브라우저 콘솔 확인 (F12)

1. **Console 탭**에서 다음 메시지 확인:
   - `Function URL: ...`
   - `응답 상태: ...`
   - 에러 메시지

2. **Network 탭**에서:
   - `/.netlify/functions/imf-api` 요청 확인
   - 상태 코드 확인 (200, 404, 500 등)
   - 응답 내용 확인

### Netlify 대시보드 확인

1. **Functions 탭**:
   - Functions 목록에 `imf-api` 있는지 확인
   - 함수 클릭 → Logs에서 오류 확인

2. **Deploys 탭**:
   - 최근 배포 상태 확인
   - 배포 로그에서 Functions 빌드 확인

## 🔧 빠른 해결 방법

### 방법 1: Functions 재배포

1. GitHub에서 파일 확인:
   - `netlify/functions/imf-api.js` 존재 확인
   - `netlify.toml`에 `functions = "netlify/functions"` 확인

2. Netlify에서:
   - "Trigger deploy" 클릭
   - 배포 완료 대기
   - Functions 탭에서 함수 확인

### 방법 2: 직접 테스트

브라우저 주소창에서 직접 테스트:
```
https://당신의사이트.netlify.app/.netlify/functions/imf-api?indicator=NGDP_RPCH&country=US&startYear=2020&endYear=2024
```

- 404 오류: Functions가 배포되지 않음
- 500 오류: Functions는 있지만 실행 오류 (로그 확인)
- JSON 응답: 정상 작동

## 📝 수정된 코드의 개선사항

1. **타임아웃 추가**: 30초 후 자동 취소
2. **에러 메시지 개선**: 더 자세한 오류 정보
3. **로딩 상태 해제**: finally 블록으로 항상 해제
4. **네트워크 오류 처리**: fetch 실패 시 명확한 메시지

## 🆘 여전히 문제가 있다면

브라우저 콘솔(F12)의 다음 정보를 확인하세요:

1. **Console 탭**의 모든 에러 메시지
2. **Network 탭**의 `imf-api` 요청:
   - 요청 URL
   - 상태 코드
   - 응답 내용

이 정보를 알려주시면 더 정확한 해결책을 제시할 수 있습니다.



